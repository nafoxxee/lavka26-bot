<!DOCTYPE html>
<html>
<head>
    <title>Lavka26 Test</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <h1>Lavka26 Mini App Test</h1>
    <p>Если вы видите эту страницу, то Mini App работает!</p>
    <div id="user-info"></div>
    
    <script>
        const tg = window.Telegram.WebApp;
        
        tg.ready();
        tg.expand();
        
        if (tg.initDataUnsafe.user) {
            document.getElementById('user-info').innerHTML = `
                <h2>Пользователь:</h2>
                <p>ID: ${tg.initDataUnsafe.user.id}</p>
                <p>Имя: ${tg.initDataUnsafe.user.first_name}</p>
                <p>Username: ${tg.initDataUnsafe.user.username || 'Нет'}</p>
            `;
        }
        
        // Кнопка для тестирования
        const button = document.createElement('button');
        button.textContent = 'Тестировать API';
        button.onclick = () => {
            fetch('http://localhost:3001/health')
                .then(response => response.json())
                .then(data => {
                    alert('API работает: ' + JSON.stringify(data));
                })
                .catch(error => {
                    alert('Ошибка API: ' + error.message);
                });
        };
        document.body.appendChild(button);
    </script>
</body>
</html>
