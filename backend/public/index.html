<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>Lavka26 - –û–±—ä—è–≤–ª–µ–Ω–∏—è</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div id="app">
        <!-- Loading -->
        <div class="loading" id="loading" style="display: none;">
            <div class="loading-spinner"></div>
            <p>–ó–∞–≥—Ä—É–∑–∫–∞ Lavka26...</p>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <div class="content" id="content">
            <!-- –®–∞–ø–∫–∞ —Å –ø–æ–∏—Å–∫–æ–º <!-- –®–∞–ø–∫–∞ –≤ —Å—Ç–∏–ª–µ –ê–≤–∏—Ç–æ -->
        <header class="header">
            <div class="header-top">
                <div class="logo">
                    <i class="fas fa-store"></i>
                    <span>Lavka26</span>
                </div>
                <div class="user-info">
                    <span id="user-name-display">–ì–æ—Å—Ç—å</span>
                </div>
                <div class="header-actions">
                    <button class="icon-btn" onclick="openNotifications()">
                        <i class="fas fa-bell"></i>
                        <span class="badge" id="notification-badge" style="display: none;">0</span>
                    </button>
                    <button class="icon-btn" onclick="switchTab('profile')">
                        <i class="fas fa-user"></i>
                    </button>
                        <span class="badge" id="message-badge" style="display: none;">0</span>
                    </button>
                    <button class="icon-btn" onclick="openProfile()">
                        <i class="fas fa-user"></i>
                    </button>
                </div>
            </div>
                
                <!-- –ü–æ–∏—Å–∫–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞ -->
                <div class="search-container">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="search-input" placeholder="–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤...">
                        <button class="filter-btn" onclick="openFilters()">
                            <i class="fas fa-sliders-h"></i>
                        </button>
                    </div>
                </div>

                <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
                <div class="categories-scroll">
                    <div class="category-item active" data-category="">
                        <i class="fas fa-th"></i>
                        <span>–í—Å–µ</span>
                    </div>
                    <div class="category-item" data-category="1">
                        <i class="fas fa-car"></i>
                        <span>–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</span>
                    </div>
                    <div class="category-item" data-category="2">
                        <i class="fas fa-home"></i>
                        <span>–ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å</span>
                    </div>
                    <div class="category-item" data-category="3">
                        <i class="fas fa-laptop"></i>
                        <span>–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞</span>
                    </div>
                    <div class="category-item" data-category="4">
                        <i class="fas fa-tshirt"></i>
                        <span>–û–¥–µ–∂–¥–∞</span>
                    </div>
                    <div class="category-item" data-category="5">
                        <i class="fas fa-briefcase"></i>
                        <span>–£—Å–ª—É–≥–∏</span>
                    </div>
                    <div class="category-item" data-category="6">
                        <i class="fas fa-briefcase"></i>
                        <span>–†–∞–±–æ—Ç–∞</span>
                    </div>
                </div>
            </header>

            <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
            <main class="main-content">
                <!-- –ì–ª–∞–≤–Ω–∞—è: –õ–µ–Ω—Ç–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π -->
                <div class="tab-content" id="feed-tab" style="display: block;">
                    <!-- –ü–∞–Ω–µ–ª—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ -->
                    <div class="sort-bar">
                        <div class="sort-options">
                            <button class="sort-btn active" data-sort="date">–ü–æ –¥–∞—Ç–µ</button>
                            <button class="sort-btn" data-sort="price-asc">–î–µ—à–µ–≤–ª–µ</button>
                            <button class="sort-btn" data-sort="price-desc">–î–æ—Ä–æ–∂–µ</button>
                        </div>
                        <div class="view-toggle">
                            <button class="view-btn active" data-view="grid">
                                <i class="fas fa-th"></i>
                            </button>
                            <button class="view-btn" data-view="list">
                                <i class="fas fa-list"></i>
                            </button>
                        </div>
                    </div>

                    <!-- –°–ø–∏—Å–æ–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏–π -->
                    <div class="ads-container" id="ads-container">
                        <div class="loading-placeholder">
                            <div class="skeleton-card"></div>
                            <div class="skeleton-card"></div>
                            <div class="skeleton-card"></div>
                        </div>
                    </div>
                </div>

                <!-- –ö–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è -->
                <button class="fab" onclick="openCreateAd()">
                    <i class="fas fa-plus"></i>
                </button>
            </main>

            <!-- –ò–∑–±—Ä–∞–Ω–Ω–æ–µ -->
            <div class="tab-content" id="favorites-tab" style="display: none;">
                <div class="favorites-content">
                    <h2>‚≠ê –ò–∑–±—Ä–∞–Ω–Ω–æ–µ</h2>
                    <div class="favorites-list" id="favorites-list">
                        <div class="loading-placeholder">–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö...</div>
                    </div>
                </div>
            </div>

            <!-- –ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è -->
            <div class="tab-content" id="my-ads-tab" style="display: none;">
                <div class="my-ads-content">
                    <div class="my-ads-header">
                        <h2>–ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è</h2>
                        <button class="btn-primary" onclick="openCreateAd()">
                            <i class="fas fa-plus"></i> –°–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ
                        </button>
                    </div>
                    
                    <!-- –§–∏–ª—å—Ç—Ä—ã —Å—Ç–∞—Ç—É—Å–æ–≤ -->
                    <div class="status-filters">
                        <button class="status-filter active" data-status="all">–í—Å–µ</button>
                        <button class="status-filter" data-status="pending">–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏</button>
                        <button class="status-filter" data-status="active">–ê–∫—Ç–∏–≤–Ω—ã–µ</button>
                        <button class="status-filter" data-status="rejected">–û—Ç–∫–ª–æ–Ω–µ–Ω–Ω—ã–µ</button>
                    </div>
                    
                    <!-- –°–ø–∏—Å–æ–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏–π -->
                    <div class="my-ads-list" id="my-ads-list">
                        <div class="loading-placeholder">–ó–∞–≥—Ä—É–∑–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π...</div>
                    </div>
                </div>
            </div>

            <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
            <div class="tab-content" id="messages-tab" style="display: none;">
                <div class="messages-content">
                    <h2>üí¨ –°–æ–æ–±—â–µ–Ω–∏—è</h2>
                    <div class="messages-list" id="messages-list">
                        <div class="loading-placeholder">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π...</div>
                    </div>
                </div>
            </div>

            <!-- –ü—Ä–æ—Ñ–∏–ª—å -->
            <div class="tab-content" id="profile-tab" style="display: none;">
                <div class="profile-content">
                    <div class="profile-header">
                        <div class="profile-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="profile-info">
                            <h2 id="profile-name">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</h2>
                            <p id="profile-username">@username</p>
                            <div class="profile-stats">
                                <div class="stat-item">
                                    <span id="profile-ads-count">0</span>
                                    <span>–û–±—ä—è–≤–ª–µ–Ω–∏–π</span>
                                </div>
                                <div class="stat-item">
                                    <span id="profile-rating">0.0</span>
                                    <span>–†–µ–π—Ç–∏–Ω–≥</span>
                                </div>
                                <div class="stat-item">
                                    <span id="profile-joined">–°–µ–≥–æ–¥–Ω—è</span>
                                    <span>–ù–∞ —Å–∞–π—Ç–µ</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="profile-actions">
                        <button class="btn-secondary" onclick="editProfile()">
                            <i class="fas fa-edit"></i> –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
                        </button>
                        <button class="btn-secondary" onclick="showSettings()">
                            <i class="fas fa-cog"></i> –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                        </button>
                    </div>
                </div>
            </div>

            <!-- –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –≤ —Å—Ç–∏–ª–µ –ê–≤–∏—Ç–æ -->
            <nav class="bottom-nav">
                <button class="nav-item active" data-tab="feed">
                    <i class="fas fa-home"></i>
                    <span>–ì–ª–∞–≤–Ω–∞—è</span>
                </button>
                <button class="nav-item" data-tab="favorites">
                    <i class="fas fa-heart"></i>
                    <span>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
                </button>
                <button class="nav-item" data-tab="my-ads">
                    <i class="fas fa-ad"></i>
                    <span>–ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è</span>
                </button>
                <button class="nav-item" data-tab="messages">
                    <i class="fas fa-comment"></i>
                    <span>–°–æ–æ–±—â–µ–Ω–∏—è</span>
                </button>
                <button class="nav-item" data-tab="moderator">
                    <i class="fas fa-shield-alt"></i>
                    <span>–ú–æ–¥–µ—Ä–∞—Ü–∏—è</span>
                </button>
            </nav>
        </div>

        <!-- –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä—Å–∫–∞—è –ø–∞–Ω–µ–ª—å -->
        <div class="tab-content" id="moderator-tab" style="display: none;">
            <div class="moderator-content">
                <h2>üõ°Ô∏è –ü–∞–Ω–µ–ª—å –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞</h2>
                
                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                <div class="mod-stats">
                    <h3>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="total-ads">0</div>
                            <div class="stat-label">–í—Å–µ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–π</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="pending-ads">0</div>
                            <div class="stat-label">–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="active-ads">0</div>
                            <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="total-reports">0</div>
                            <div class="stat-label">–ñ–∞–ª–æ–±</div>
                        </div>
                    </div>
                </div>

                <!-- –û–±—ä—è–≤–ª–µ–Ω–∏—è –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ -->
                <div class="mod-section">
                    <h3>üìã –û–±—ä—è–≤–ª–µ–Ω–∏—è –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏</h3>
                    <div class="mod-controls">
                        <button class="btn-secondary" onclick="refreshPendingAds()">
                            <i class="fas fa-sync"></i> –û–±–Ω–æ–≤–∏—Ç—å
                        </button>
                    </div>
                    <div class="pending-ads-list" id="pending-ads-list">
                        <div class="loading-placeholder">–ó–∞–≥—Ä—É–∑–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π...</div>
                    </div>
                </div>

                <!-- –ñ–∞–ª–æ–±—ã -->
                <div class="mod-section">
                    <h3>üö® –ñ–∞–ª–æ–±—ã</h3>
                    <div class="mod-controls">
                        <button class="btn-secondary" onclick="refreshReports()">
                            <i class="fas fa-sync"></i> –û–±–Ω–æ–≤–∏—Ç—å
                        </button>
                    </div>
                    <div class="reports-list" id="reports-list">
                        <div class="loading-placeholder">–ó–∞–≥—Ä—É–∑–∫–∞ –∂–∞–ª–æ–±...</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è -->
        <div class="tab-content" id="my-ads-tab" style="display: none;">
            <div class="my-ads-content">
                <div class="my-ads-header">
                    <h2>–ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è</h2>
                    <button class="btn-primary" onclick="openCreateAd()">
                        <i class="fas fa-plus"></i> –°–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ
                    </button>
                </div>
                
                <!-- –§–∏–ª—å—Ç—Ä—ã —Å—Ç–∞—Ç—É—Å–æ–≤ -->
                <div class="status-filters">
                    <button class="status-filter active" data-status="all">–í—Å–µ</button>
                    <button class="status-filter" data-status="pending">–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏</button>
                    <button class="status-filter" data-status="active">–ê–∫—Ç–∏–≤–Ω—ã–µ</button>
                    <button class="status-filter" data-status="rejected">–û—Ç–∫–ª–æ–Ω–µ–Ω–Ω—ã–µ</button>
                </div>
                
                <!-- –°–ø–∏—Å–æ–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏–π -->
                <div class="my-ads-list" id="my-ads-list">
                    <div class="loading-placeholder">–ó–∞–≥—Ä—É–∑–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π...</div>
                </div>
            </div>
        </div>

        <!-- –ü—Ä–æ—Ñ–∏–ª—å -->
        <div class="tab-content" id="profile-tab" style="display: none;">
            <div class="profile-content">
                <div class="profile-header">
                    <div class="profile-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="profile-info">
                        <h2 id="profile-name">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</h2>
                        <p id="profile-username">@username</p>
                        <div class="profile-stats">
                            <div class="stat-item">
                                <span id="profile-ads-count">0</span>
                                <span>–û–±—ä—è–≤–ª–µ–Ω–∏–π</span>
                            </div>
                            <div class="stat-item">
                                <span id="profile-rating">0.0</span>
                                <span>–†–µ–π—Ç–∏–Ω–≥</span>
                            </div>
                            <div class="stat-item">
                                <span id="profile-joined">–°–µ–≥–æ–¥–Ω—è</span>
                                <span>–ù–∞ —Å–∞–π—Ç–µ</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="profile-actions">
                    <button class="btn-primary" onclick="openCreateAd()">
                        <i class="fas fa-plus"></i> –°–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ
                    </button>
                    <button class="btn-secondary" onclick="editProfile()">
                        <i class="fas fa-edit"></i> –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
                    </button>
                </div>
                
                <div class="profile-sections">
                    <div class="profile-section">
                        <h3>–ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è</h3>
                        <div class="profile-ads-preview" id="profile-ads-preview">
                            <div class="loading-placeholder">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                        </div>
                        <button class="btn-link" onclick="switchTab('my-ads')">
                            –í—Å–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                    
                    <div class="profile-section">
                        <h3>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</h3>
                        <div class="profile-favorites-preview" id="profile-favorites-preview">
                            <div class="loading-placeholder">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                        </div>
                        <button class="btn-link" onclick="switchTab('favorites')">
                            –í—Å–µ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                    
                    <div class="profile-section">
                        <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                        <div class="settings-list">
                            <div class="setting-item">
                                <label class="switch">
                                    <input type="checkbox" id="notifications-enabled" checked>
                                    <span class="slider"></span>
                                </label>
                                <span>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
                            </div>
                            <div class="setting-item">
                                <label class="switch">
                                    <input type="checkbox" id="location-enabled">
                                    <span class="slider"></span>
                                </label>
                                <span>–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è</span>
                            </div>
                            <div class="setting-item">
                                <label class="switch">
                                    <input type="checkbox" id="messages-enabled" checked>
                                    <span class="slider"></span>
                                </label>
                                <span>–°–æ–æ–±—â–µ–Ω–∏—è</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ò–∑–±—Ä–∞–Ω–Ω–æ–µ -->
        <div class="tab-content" id="favorites-tab" style="display: none;">
            <div class="favorites-content">
                <div class="favorites-header">
                    <h2>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</h2>
                    <div class="favorites-count">
                        <span id="favorites-count">0</span> –æ–±—ä—è–≤–ª–µ–Ω–∏–π
                    </div>
                </div>
                
                <!-- –°–ø–∏—Å–æ–∫ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π -->
                <div class="favorites-list" id="favorites-list">
                    <div class="loading-placeholder">–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ...</div>
                </div>
                
                <!-- –ü—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ -->
                <div class="empty-state" id="empty-favorites" style="display: none;">
                    <i class="fas fa-heart"></i>
                    <h3>–ù–µ—Ç –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π</h3>
                    <p>–î–æ–±–∞–≤–ª—è–π—Ç–µ –ø–æ–Ω—Ä–∞–≤–∏–≤—à–∏–µ—Å—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ, —á—Ç–æ–±—ã –Ω–µ –ø–æ—Ç–µ—Ä—è—Ç—å –∏—Ö</p>
                    <button class="btn-primary" onclick="switchTab('feed')">
                        <i class="fas fa-search"></i> –ù–∞–π—Ç–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
                    </button>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è -->
        <div class="modal" id="create-ad-modal" style="display: none;">
            <div class="modal-content create-ad-modal">
                <div class="modal-header">
                    <button class="close-btn" onclick="closeCreateAdModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="create-ad-form">
                        <div class="form-group">
                            <label>–ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è *</label>
                            <input type="text" id="ad-title" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: iPhone 13 Pro" required>
                        </div>
                        
                        <div class="form-group">
                            <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è *</label>
                            <select id="ad-category" required>
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
                                <option value="electronics">–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞</option>
                                <option value="clothing">–û–¥–µ–∂–¥–∞</option>
                                <option value="home">–î–æ–º –∏ —Å–∞–¥</option>
                                <option value="auto">–ê–≤—Ç–æ</option>
                                <option value="services">–£—Å–ª—É–≥–∏</option>
                                <option value="other">–î—Ä—É–≥–æ–µ</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>–¶–µ–Ω–∞ (‚ÇΩ) *</label>
                            <input type="number" id="ad-price" placeholder="10000" required>
                        </div>
                        
                        <div class="form-group">
                            <label>–û–ø–∏—Å–∞–Ω–∏–µ *</label>
                            <textarea id="ad-description" rows="4" placeholder="–û–ø–∏—à–∏—Ç–µ —Ç–æ–≤–∞—Ä –ø–æ–¥—Ä–æ–±–Ω–æ..." required></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label>–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏</label>
                            <div class="image-upload-area" onclick="document.getElementById('ad-images').click()">
                                <i class="fas fa-camera"></i>
                                <span>–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ñ–æ—Ç–æ</span>
                                <input type="file" id="ad-images" multiple accept="image/*" style="display: none;">
                            </div>
                            <div class="image-preview-container" id="image-preview-container"></div>
                        </div>

                        <!-- –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ -->
                        <div class="form-group">
                            <label for="ad-location-input">–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ</label>
                            <div class="location-input">
                                <i class="fas fa-map-marker-alt"></i>
                                <input type="text" id="ad-location-input" name="location" 
                                       placeholder="–ì–æ—Ä–æ–¥ –∏–ª–∏ —Ä–∞–π–æ–Ω">
                            </div>
                        </div>

                        <!-- –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                        <div class="form-group">
                            <label>–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</label>
                            <div class="contact-options">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="show-phone" checked>
                                    <span class="checkmark"></span>
                                    –ü–æ–∫–∞–∑–∞—Ç—å –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="allow-messages" checked>
                                    <span class="checkmark"></span>
                                    –†–∞–∑—Ä–µ—à–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è
                                </label>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è -->
        <div class="modal" id="ad-modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <button class="back-btn" onclick="closeModal()">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <h3 id="modal-title">–û–±—ä—è–≤–ª–µ–Ω–∏–µ</h3>
                    <button class="share-btn" onclick="shareAd()">
                        <i class="fas fa-share-alt"></i>
                    </button>
                </div>
                <div class="modal-body" id="modal-body">
                    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏—è -->
                </div>
                <div class="modal-actions">
                    <button class="action-btn secondary" onclick="toggleFavorite()">
                        <i class="fas fa-heart"></i>
                        <span>–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
                    </button>
                    <button class="action-btn primary" onclick="contactSeller()">
                        <i class="fas fa-phone"></i>
                        <span>–°–≤—è–∑–∞—Ç—å—Å—è</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤ -->
        <div class="modal" id="filters-modal" style="display: none;">
            <div class="modal-content filters-modal">
                <div class="modal-header">
                    <button class="close-btn" onclick="closeFilters()">
                        <i class="fas fa-times"></i>
                    </button>
                    <h3>–§–∏–ª—å—Ç—Ä—ã</h3>
                    <button class="reset-btn" onclick="resetFilters()">–°–±—Ä–æ—Å–∏—Ç—å</button>
                </div>
                <div class="modal-body">
                    <div class="filter-section">
                        <h4>–¶–µ–Ω–∞</h4>
                        <div class="price-range">
                            <input type="number" id="price-min" placeholder="–û—Ç">
                            <span>-</span>
                            <input type="number" id="price-max" placeholder="–î–æ">
                        </div>
                    </div>
                    
                    <div class="filter-section">
                        <h4>–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ</h4>
                        <div class="location-input">
                            <i class="fas fa-map-marker-alt"></i>
                            <input type="text" id="location" placeholder="–ì–æ—Ä–æ–¥ –∏–ª–∏ —Ä–∞–π–æ–Ω">
                        </div>
                        <div class="distance-slider">
                            <label>–†–∞–¥–∏—É—Å: <span id="distance-value">10</span> –∫–º</label>
                            <input type="range" id="distance" min="1" max="100" value="10">
                        </div>
                    </div>
                    
                    <div class="filter-section">
                        <h4>–î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏</h4>
                        <div class="date-options">
                            <label><input type="radio" name="date" value="today" checked> –°–µ–≥–æ–¥–Ω—è</label>
                            <label><input type="radio" name="date" value="week"> –ó–∞ –Ω–µ–¥–µ–ª—é</label>
                            <label><input type="radio" name="date" value="month"> –ó–∞ –º–µ—Å—è—Ü</label>
                            <label><input type="radio" name="date" value="all"> –í—Å–µ –≤—Ä–µ–º—è</label>
                        </div>
                    </div>
                    
                    <div class="filter-section">
                        <h4>–¢–æ–ª—å–∫–æ —Å —Ñ–æ—Ç–æ</h4>
                        <label class="switch">
                            <input type="checkbox" id="with-photos">
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn-secondary" onclick="closeFilters()">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn-primary" onclick="applyFilters()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                </div>
            </div>
        </div>

        <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
        <div class="notifications" id="notifications"></div>
    </div>

    <script src="app.js"></script>
    <script>
        // –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫
        console.log('üöÄ Lavka26 –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è...');
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
        const loading = document.getElementById('loading');
        const content = document.getElementById('content');
        if (loading) loading.style.display = 'none';
        if (content) content.style.display = 'block';
        
        // –ü—Ä–æ—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫
        window.openCreateAd = function() {
            const modal = document.getElementById('create-ad-modal');
            if (modal) {
                modal.style.display = 'flex';
                showNotification('–°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è', 'info');
            }
        };
        
        window.closeCreateAdModal = function() {
            const modal = document.getElementById('create-ad-modal');
            if (modal) {
                modal.style.display = 'none';
                // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
                document.getElementById('create-ad-form').reset();
                document.getElementById('image-preview-container').innerHTML = '';
            }
        };
        
        window.publishAd = async function() {
            const title = document.getElementById('ad-title').value;
            const category = document.getElementById('ad-category').value;
            const price = document.getElementById('ad-price').value;
            const description = document.getElementById('ad-description').value;
            const location = document.getElementById('ad-location-input').value;
            
            // –í–∞–ª–∏–¥–∞—Ü–∏—è
            if (!title || !category || !price || !description) {
                showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è', 'error');
                return;
            }
            
            try {
                // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Telegram WebApp
                const tg = window.Telegram?.WebApp;
                const user = tg?.initDataUnsafe?.user;
                
                if (!user) {
                    showNotification('–û—à–∏–±–∫–∞: –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã', 'error');
                    return;
                }
                
                // –°–æ–∑–¥–∞–µ–º –æ–±—ä—è–≤–ª–µ–Ω–∏–µ
                const adData = {
                    title: title,
                    category: category,
                    price: parseInt(price),
                    description: description,
                    location: location || '–ú–æ—Å–∫–≤–∞',
                    contact_info: user.username ? `@${user.username}` : '',
                    user_id: user.id,
                    user_name: `${user.first_name} ${user.last_name || ''}`.trim(),
                    images: [] // –ü–æ–∫–∞ –±–µ–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
                };
                
                const response = await fetch('/api/ads', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(adData)
                });
                
                if (response.ok) {
                    const result = await response.json();
                    showNotification('–û–±—ä—è–≤–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é!', 'success');
                    closeCreateAdModal();
                    
                    // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –Ω–∞ "–ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è"
                    setTimeout(() => {
                        switchTab('my-ads');
                    }, 1000);
                } else {
                    const error = await response.json();
                    showNotification(error.error || '–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è', 'error');
                }
            } catch (error) {
                console.error('Error creating ad:', error);
                showNotification('–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É', 'error');
            }
        };
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
        document.addEventListener('DOMContentLoaded', function() {
            const imageInput = document.getElementById('ad-images');
            if (imageInput) {
                imageInput.addEventListener('change', function(e) {
                    const files = e.target.files;
                    const preview = document.getElementById('image-preview-container');
                    
                    preview.innerHTML = '';
                    
                    Array.from(files).forEach(file => {
                        if (file.type.startsWith('image/')) {
                            const reader = new FileReader();
                            reader.onload = function(e) {
                                const imgDiv = document.createElement('div');
                                imgDiv.className = 'image-preview-item';
                                imgDiv.innerHTML = `
                                    <img src="${e.target.result}" alt="Preview">
                                    <button type="button" onclick="this.parentElement.remove()" class="remove-image">
                                        <i class="fas fa-times"></i>
                                    </button>
                                `;
                                preview.appendChild(imgDiv);
                            };
                            reader.readAsDataURL(file);
                        }
                    });
                });
            }
        });
        
        window.switchTab = function(tabName) {
            console.log('switchTab –≤—ã–∑–≤–∞–Ω–∞ —Å:', tabName);
            
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.style.display = 'none';
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            const tabElement = document.getElementById(`${tabName}-tab`);
            if (tabElement) {
                tabElement.style.display = 'block';
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –≤–∫–ª–∞–¥–∫–∏
                if (tabName === 'favorites') {
                    loadFavorites();
                } else if (tabName === 'my-ads') {
                    loadMyAds();
                } else if (tabName === 'profile') {
                    loadProfile();
                } else if (tabName === 'moderator') {
                    loadModerator();
                } else if (tabName === 'messages') {
                    loadMessages();
                } else if (tabName === 'feed') {
                    loadAds(); // –ó–∞–≥—Ä—É–∂–∞–µ–º –ª–µ–Ω—Ç—É –æ–±—ä—è–≤–ª–µ–Ω–∏–π
                }
            }
            
            // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É
            const activeBtn = document.querySelector(`.nav-item[data-tab="${tabName}"]`);
            if (activeBtn) {
                activeBtn.classList.add('active');
            }
        };
        
        // –§—É–Ω–∫—Ü–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
        async function loadAds() {
            const adsContainer = document.getElementById('ads-container');
            if (!adsContainer) return;
            
            try {
                const response = await fetch('/api/ads?status=active&limit=20');
                const ads = await response.json();
                
                if (ads.length === 0) {
                    adsContainer.innerHTML = `
                        <div class="empty-state" style="text-align: center; padding: 40px;">
                            <i class="fas fa-search" style="font-size: 48px; color: var(--text-muted); margin-bottom: 16px;"></i>
                            <h3 style="color: var(--text-secondary); margin-bottom: 8px;">–û–±—ä—è–≤–ª–µ–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                            <p style="color: var(--text-muted);">–ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º, –∫—Ç–æ —Å–æ–∑–¥–∞—Å—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏–µ!</p>
                        </div>
                    `;
                    return;
                }
                
                const adsHTML = ads.map(ad => `
                    <div class="ad-card" onclick="openAd(${ad.id})">
                        <div class="ad-image">
                            ${ad.images && ad.images.length > 0 
                                ? `<img src="${ad.images[0]}" alt="${ad.title}">` 
                                : `<div class="no-image"><i class="fas fa-image"></i></div>`
                            }
                        </div>
                        <div class="ad-content">
                            <div class="ad-title">${escapeHtml(ad.title)}</div>
                            <div class="ad-price">${formatPrice(ad.price)} ‚ÇΩ</div>
                            <div class="ad-location">
                                <i class="fas fa-map-marker-alt"></i>
                                ${ad.location || '–ú–æ—Å–∫–≤–∞'}
                            </div>
                            <div class="ad-date">${formatDate(ad.created_at)}</div>
                        </div>
                    </div>
                `).join('');
                
                adsContainer.innerHTML = adsHTML;
            } catch (error) {
                console.error('Error loading ads:', error);
                adsContainer.innerHTML = '<div class="error-message">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–π</div>';
            }
        }
        
        function loadFavorites() {
            const favoritesList = document.getElementById('favorites-list');
            if (favoritesList) {
                favoritesList.innerHTML = `
                    <div class="empty-state" style="text-align: center; padding: 40px;">
                        <i class="fas fa-heart" style="font-size: 48px; color: var(--text-muted); margin-bottom: 16px;"></i>
                        <h3 style="color: var(--text-secondary); margin-bottom: 8px;">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π</h3>
                        <p style="color: var(--text-muted);">–î–æ–±–∞–≤–ª—è–π—Ç–µ –ø–æ–Ω—Ä–∞–≤–∏–≤—à–∏–µ—Å—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ</p>
                    </div>
                `;
            }
        }
        
        async function loadMyAds() {
            const myAdsList = document.getElementById('my-ads-list');
            if (!myAdsList) return;
            
            try {
                // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                const tg = window.Telegram?.WebApp;
                const user = tg?.initDataUnsafe?.user;
                
                if (!user) {
                    myAdsList.innerHTML = '<div class="error-message">–û—à–∏–±–∫–∞: –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>';
                    return;
                }
                
                const response = await fetch(`/api/ads/user/${user.id}`);
                const myAds = await response.json();
                
                if (myAds.length === 0) {
                    myAdsList.innerHTML = `
                        <div class="empty-state" style="text-align: center; padding: 40px;">
                            <i class="fas fa-ad" style="font-size: 48px; color: var(--text-muted); margin-bottom: 16px;"></i>
                            <h3 style="color: var(--text-secondary); margin-bottom: 8px;">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏–π</h3>
                            <p style="color: var(--text-muted);">–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–µ –ø–µ—Ä–≤–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</p>
                            <button class="btn-primary" onclick="openCreateAd()" style="margin-top: 16px;">
                                <i class="fas fa-plus"></i> –°–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ
                            </button>
                        </div>
                    `;
                    return;
                }
                
                const adsHTML = myAds.map(ad => `
                    <div class="my-ad-card">
                        <div class="my-ad-image">
                            ${ad.images && ad.images.length > 0 
                                ? `<img src="${ad.images[0]}" alt="${ad.title}">` 
                                : `<div class="no-image"><i class="fas fa-image"></i></div>`
                            }
                        </div>
                        <div class="my-ad-content">
                            <div class="my-ad-header">
                                <h4>${escapeHtml(ad.title)}</h4>
                                <span class="status-badge status-${ad.status}">${getStatusText(ad.status)}</span>
                            </div>
                            <div class="my-ad-price">${formatPrice(ad.price)} ‚ÇΩ</div>
                            <div class="my-ad-meta">
                                <span class="ad-views">
                                    <i class="fas fa-eye"></i>
                                    ${ad.views || 0} –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
                                </span>
                                <span class="ad-date">${formatDate(ad.created_at)}</span>
                            </div>
                            <div class="my-ad-actions">
                                ${ad.status === 'pending' ? '<span class="pending-text">–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏</span>' : ''}
                                ${ad.status === 'rejected' ? '<span class="rejected-text">–û—Ç–∫–ª–æ–Ω–µ–Ω–æ</span>' : ''}
                            </div>
                        </div>
                    </div>
                `).join('');
                
                myAdsList.innerHTML = adsHTML;
            } catch (error) {
                console.error('Error loading my ads:', error);
                myAdsList.innerHTML = '<div class="error-message">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–π</div>';
            }
        }
        
        async function loadModerator() {
            const moderatorContent = document.querySelector('.moderator-content');
            if (!moderatorContent) return;
            
            try {
                // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                const statsResponse = await fetch('/api/moderator/stats');
                const stats = await statsResponse.json();
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –æ–±—ä—è–≤–ª–µ–Ω–∏—è –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏
                const pendingResponse = await fetch('/api/ads/pending');
                const pendingAds = await pendingResponse.json();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                document.getElementById('total-ads').textContent = stats.total_ads || 0;
                document.getElementById('pending-ads').textContent = stats.pending_ads || 0;
                document.getElementById('active-ads').textContent = stats.active_ads || 0;
                document.getElementById('total-reports').textContent = stats.total_reports || 0;
                
                // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –æ–±—ä—è–≤–ª–µ–Ω–∏—è –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏
                const pendingAdsList = document.getElementById('pending-ads-list');
                if (pendingAds.length === 0) {
                    pendingAdsList.innerHTML = '<div class="empty-state">–ù–µ—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏–π –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏</div>';
                } else {
                    const adsHTML = pendingAds.map(ad => `
                        <div class="pending-ad-card">
                            <div class="pending-ad-header">
                                <h4>${escapeHtml(ad.title)}</h4>
                                <span class="price">${formatPrice(ad.price)} ‚ÇΩ</span>
                            </div>
                            <p>${escapeHtml(ad.description)}</p>
                            <div class="pending-ad-actions">
                                <button class="btn-success" onclick="approveAd(${ad.id})">
                                    <i class="fas fa-check"></i> –û–¥–æ–±—Ä–∏—Ç—å
                                </button>
                                <button class="btn-danger" onclick="rejectAd(${ad.id})">
                                    <i class="fas fa-times"></i> –û—Ç–∫–ª–æ–Ω–∏—Ç—å
                                </button>
                            </div>
                        </div>
                    `).join('');
                    pendingAdsList.innerHTML = adsHTML;
                }
                
                showNotification('–ü–∞–Ω–µ–ª—å –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞', 'success');
            } catch (error) {
                console.error('Error loading moderator panel:', error);
                showNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–∞–Ω–µ–ª–∏ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞', 'error');
            }
        }
        
        function loadMessages() {
            const messagesList = document.getElementById('messages-list');
            if (messagesList) {
                messagesList.innerHTML = `
                    <div class="empty-state" style="text-align: center; padding: 40px;">
                        <i class="fas fa-comment" style="font-size: 48px; color: var(--text-muted); margin-bottom: 16px;"></i>
                        <h3 style="color: var(--text-secondary); margin-bottom: 8px;">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π</h3>
                        <p style="color: var(--text-muted);">–ù–∞—á–Ω–∏—Ç–µ –æ–±—â–µ–Ω–∏–µ —Å –ø—Ä–æ–¥–∞–≤—Ü–∞–º–∏</p>
                    </div>
                `;
            }
        }
        
        function loadProfile() {
            showNotification('–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è', 'info');
        }
        
        // –§—É–Ω–∫—Ü–∏–∏ –º–æ–¥–µ—Ä–∞—Ü–∏–∏
        window.approveAd = async function(adId) {
            try {
                const response = await fetch(`/api/moderator/approve-ad/${adId}`, {
                    method: 'POST'
                });
                
                if (response.ok) {
                    showNotification('–û–±—ä—è–≤–ª–µ–Ω–∏–µ –æ–¥–æ–±—Ä–µ–Ω–æ', 'success');
                    loadModerator(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫
                } else {
                    showNotification('–û—à–∏–±–∫–∞ –æ–¥–æ–±—Ä–µ–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è', 'error');
                }
            } catch (error) {
                console.error('Error approving ad:', error);
                showNotification('–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è', 'error');
            }
        };
        
        window.rejectAd = async function(adId) {
            const reason = prompt('–£–∫–∞–∂–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è:');
            if (!reason) return;
            
            try {
                const response = await fetch(`/api/moderator/reject-ad/${adId}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ reason })
                });
                
                if (response.ok) {
                    showNotification('–û–±—ä—è–≤–ª–µ–Ω–∏–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ', 'success');
                    loadModerator(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫
                } else {
                    showNotification('–û—à–∏–±–∫–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è', 'error');
                }
            } catch (error) {
                console.error('Error rejecting ad:', error);
                showNotification('–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è', 'error');
            }
        };
        
        // –£—Ç–∏–ª–∏—Ç—ã
        function formatPrice(price) {
            return new Intl.NumberFormat('ru-RU').format(price);
        }
        
        function formatDate(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const diff = now - date;
            
            if (diff < 60000) return '—Ç–æ–ª—å–∫–æ —á—Ç–æ';
            if (diff < 3600000) return `${Math.floor(diff / 60000)} –º–∏–Ω –Ω–∞–∑–∞–¥`;
            if (diff < 86400000) return `${Math.floor(diff / 3600000)} —á –Ω–∞–∑–∞–¥`;
            if (diff < 604800000) return `${Math.floor(diff / 86400000)} –¥ –Ω–∞–∑–∞–¥`;
            
            return date.toLocaleDateString('ru-RU');
        }
        
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        function getStatusText(status) {
            const statuses = {
                'pending': '–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏',
                'active': '–ê–∫—Ç–∏–≤–Ω–æ',
                'rejected': '–û—Ç–∫–ª–æ–Ω–µ–Ω–æ',
                'sold': '–ü—Ä–æ–¥–∞–Ω–æ'
            };
            return statuses[status] || status;
        }
        
        function showNotification(message, type = 'info') {
            const notifications = document.getElementById('notifications');
            if (!notifications) return;
            
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.style.cssText = `
                background: ${type === 'error' ? '#ff4757' : type === 'success' ? '#00b894' : '#0984e3'};
                color: white;
                padding: 12px 16px;
                border-radius: 8px;
                margin-bottom: 8px;
                display: flex;
                align-items: center;
                gap: 8px;
                animation: slideIn 0.3s ease;
            `;
            notification.innerHTML = `
                <i class="fas fa-${type === 'error' ? 'exclamation-circle' : type === 'success' ? 'check-circle' : 'info-circle'}"></i>
                <span>${message}</span>
            `;
            
            notifications.appendChild(notification);
            
            setTimeout(() => {
                notification.style.opacity = '0';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }
        
        window.testFunction = function() {
            alert('–ö–Ω–æ–ø–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç! JavaScript –∑–∞–≥—Ä—É–∂–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ.');
            console.log('üß™ –¢–µ—Å—Ç–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–∑–≤–∞–Ω–∞!');
        };
        
        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM –∑–∞–≥—Ä—É–∂–µ–Ω, –¥–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏...');
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è - –∑–∞–≥—Ä—É–∂–∞–µ–º –ª–µ–Ω—Ç—É –æ–±—ä—è–≤–ª–µ–Ω–∏–π
            console.log('–ù–∞—á–∏–Ω–∞—é –∑–∞–≥—Ä—É–∑–∫—É –æ–±—ä—è–≤–ª–µ–Ω–∏–π...');
            loadAds();
            
            // –ù–∞–≤–∏–≥–∞—Ü–∏—è
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', function() {
                    const tabName = this.dataset.tab;
                    console.log('–ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ:', tabName);
                    window.switchTab(tabName);
                });
            });
            
            // –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
            document.querySelectorAll('.category-item').forEach(item => {
                item.addEventListener('click', function() {
                    document.querySelectorAll('.category-item').forEach(cat => cat.classList.remove('active'));
                    this.classList.add('active');
                    
                    // –§–∏–ª—å—Ç—Ä—É–µ–º –æ–±—ä—è–≤–ª–µ–Ω–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
                    const category = this.dataset.category;
                    filterAdsByCategory(category);
                });
            });
            
            // FAB –∫–Ω–æ–ø–∫–∞
            const fab = document.querySelector('.fab');
            if (fab) {
                fab.addEventListener('click', window.openCreateAd);
            }
            
            // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
            document.querySelectorAll('.sort-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.sort-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    sortAds(this.dataset.sort);
                });
            });
            
            // –ü–æ–∏—Å–∫
            const searchInput = document.getElementById('search-input');
            if (searchInput) {
                searchInput.addEventListener('input', function() {
                    searchAds(this.value);
                });
            }
            
            console.log('–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã!');
            console.log('–í—Å–µ –≤–∫–ª–∞–¥–∫–∏:', document.querySelectorAll('.tab-content'));
            console.log('–í—Å–µ –∫–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏:', document.querySelectorAll('.nav-item'));
        });
        
        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function filterAdsByCategory(category) {
            console.log('–§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:', category);
            // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –æ–±—ä—è–≤–ª–µ–Ω–∏–π
            showNotification(`–ö–∞—Ç–µ–≥–æ—Ä–∏—è: ${category}`, 'info');
        }
        
        function sortAds(sortBy) {
            console.log('–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:', sortBy);
            showNotification(`–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: ${sortBy}`, 'info');
        }
        
        function searchAds(query) {
            console.log('–ü–æ–∏—Å–∫:', query);
            // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∏—Å–∫
        }
        
        window.editProfile = function() {
            showNotification('–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ', 'info');
        };
        
        window.showSettings = function() {
            showNotification('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ', 'info');
        };
    </script>
</body>
</html>
